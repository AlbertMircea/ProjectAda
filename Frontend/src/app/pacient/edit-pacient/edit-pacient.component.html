<div class="backdrop" (click)="onCancel()"></div>
<dialog open>
  <div class="form-group">
    <h2>{{ editPurposeText }}</h2>
  </div>

  <form #form="ngForm" (ngSubmit)="onSubmitEditPatient()">
    <!-- First Name -->
    <div class="form-group">
      <label>
        First Name:
        <input
          [(ngModel)]="patient.firstName"
          name="firstName"
          required
          #firstName="ngModel"
        />
      </label>
      @if (firstName.invalid && firstName.touched) {
      <p class="error">First name is required.</p>
      }
    </div>

    <!-- Last Name -->
    <div class="form-group">
      <label>
        Last Name:
        <input
          [(ngModel)]="patient.lastName"
          name="lastName"
          required
          #lastName="ngModel"
        />
      </label>
      @if (lastName.invalid && lastName.touched) {
      <p class="error">Last name is required.</p>
      }
    </div>

    <!-- Email -->
    <div class="form-group">
      <label>
        Email:
        <input
          [(ngModel)]="patient.email"
          name="email"
          required
          email
          #email="ngModel"
        />
      </label>
      @if (email.invalid && email.touched) {
      <p class="error">A valid email is required.</p>
      }
    </div>

    <!-- Gender -->
    <div class="form-group">
      <label for="gender">
        Gender
        <select
          id="gender"
          [(ngModel)]="patient.gender"
          name="gender"
          required
          #gender="ngModel"
        >
          <option value="" disabled>Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </label>
      @if (gender.invalid && gender.touched) {
      <p class="error">Please select a gender.</p>
      }
    </div>

    <!-- DoctorID -->
<div class="form-group">
  <label for="doctorID">Doctor</label>
  <select
    id="doctorID"
    [(ngModel)]="patient.doctorID"
    name="DoctorID"
    required
  >
    <option value="" disabled>Select a doctor</option>
    @for (doctor of doctors; track $index) {
    <option [value]="doctor.userId">
      {{ doctor.firstName }} {{ doctor.lastName }}
    </option>
  }
  </select>
</div>


    <!-- Ward -->
    <div class="form-group">
      <label>
        Ward:
        <select
          id="Ward"
          [(ngModel)]="patient.ward"
          name="Ward"
          required
          #ward="ngModel"
        >
          <option value="" disabled selected>Select a ward</option>
          <option value="Emergency">Emergency</option>
          <option value="General Medicine">General Medicine</option>
        </select>
      </label>
      @if (ward.invalid && ward.touched) {
      <p class="error">Please select a ward.</p>
      }
    </div>

    <!-- Room -->
    <div class="form-group">
      <label for="Room">
        Room:
        <select
          id="Room"
          [(ngModel)]="patient.room"
          name="Room"
          required
          #room="ngModel"
        >
          <option value="" disabled selected>Select a room</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </label>
      @if (room.invalid && room.touched) {
      <p class="error">Please select a room.</p>
      }
    </div>

    <!-- Buttons -->
    <div class="actions">
      <button type="button" (click)="onCancel()">Cancel</button>
      <button type="submit" [disabled]="form.invalid">Submit</button>
    </div>
  </form>
</dialog>
